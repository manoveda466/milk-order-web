<div class="login-container">
  <!-- Common Loading Component -->
  <app-loading [overlay]="true"></app-loading>
  
  <div class="login-card">
    <!-- Header -->
    <div class="login-header">
      <h2 style="color: #2c2951 !important">Welcome to Milk Order Console</h2>
      <p class="subtitle">
        {{ showOtpScreen ? 'Please enter 6 digit PIN' : 'Enter your mobile number to continue' }}
      </p>
    </div>

    <!-- Mobile Number Input Screen -->
    <div *ngIf="!showOtpScreen" class="mobile-input-section">
      <div class="form-group">
        <div class="mobile-input-container">
          <input
            id="mobileNumber"
            type="tel"
            [(ngModel)]="mobileNumber"
            (input)="onMobileNumberInput($event)"
            (keypress)="onKeyPress($event)"
            placeholder="Enter 10-digit mobile number"
            maxlength="10"
            class="mobile-input"

            pattern="[0-9]*"
            inputmode="numeric"
          />
        </div>
        
      </div>

      <button
        type="button"
        (click)="checkValidUser()"
        [disabled]="!isValidMobileNumber()"
        class="primary-button"
        [class.button-disabled]="!isValidMobileNumber()"
      >
        Continue
      </button>
    </div>

    <!-- OTP Input Screen -->
    <div *ngIf="showOtpScreen" class="otp-input-section">
      <!-- <div class="mobile-display">
        <span class="mobile-number">+91 {{ mobileNumber }}</span>
        <button type="button" (click)="goBack()" class="change-number-btn">Change</button>
      </div> -->

      <div class="form-group">
        <!-- <label for="otp">Enter OTP</label> -->
        <input
          id="otp"
          type="password"
          [(ngModel)]="otp"
          (input)="onOtpInput($event)"
          placeholder="Enter 6-digit PIN"
          maxlength="6"
          class="otp-input"
        />
      </div>

      <!-- <div class="otp-timer" *ngIf="!canResendOtp">
        <span>Resend OTP in {{ otpTimer }}s</span>
      </div> -->

      <div class="otp-actions">
        <button
          type="button"
          (click)="verifyOtp()"
          [disabled]="otp.length !== 6"
          class="primary-button"
        >
          Verify PIN
        </button>

        <!-- <button
          type="button"
          (click)="resendOtp()"
          [disabled]="!canResendOtp"
          class="secondary-button"
        >
          Resend OTP
        </button> -->
      </div>
    </div>

    <!-- Success/Error Messages -->
    <div *ngIf="successMessage" class="message success-message">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="message error-message">
      {{ errorMessage }}
    </div>
  </div>
</div>
